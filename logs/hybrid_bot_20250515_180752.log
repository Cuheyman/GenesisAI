2025-05-15 18:07:53,544 - INFO - Dummy Nebula AI client initialized (fallback mode)
2025-05-15 18:07:53,552 - INFO - Database initialization complete
2025-05-15 18:07:53,579 - INFO - Thirdweb Nebula AI client initialized via local proxy
2025-05-15 18:07:53,580 - INFO - Risk Manager initialized with equity protection: Warning at 3.0%, Risk Reduction at 7.000000000000001%, High Alert at 12.0%, Emergency at 15.0%
2025-05-15 18:07:53,580 - INFO - Hybrid Trading Bot initialized with 10000.00 equity
2025-05-15 18:07:53,581 - INFO - Mode: TEST trading
2025-05-15 18:07:53,581 - INFO - Testing API connections...
2025-05-15 18:07:54,285 - INFO - Binance server time: 2025-05-15 18:07:54.145000
2025-05-15 18:07:54,428 - ERROR - Nebula API error: 503 - {"error":"Nebula AI service not available","message":"ThirdWeb SDK initialization failed"}
2025-05-15 18:07:54,428 - INFO - Nebula AI connection successful: 0
2025-05-15 18:07:54,429 - INFO - Preloading historical data for analysis...
2025-05-15 18:07:54,429 - INFO - Preloading historical data for analysis...
2025-05-15 18:07:54,429 - INFO - Fetching top 20 trending cryptocurrency pairs
2025-05-15 18:07:55,384 - INFO - Found trending pairs: GUNUSDT, BABYUSDT, KMNOUSDT, WCTUSDT, SIGNUSDT...
2025-05-15 18:07:55,385 - INFO - Preloading data for pairs: VANAUSDT, BABYUSDT, ENAUSDT, WCTUSDT, RAYUSDT
2025-05-15 18:08:28,815 - INFO - Preloading data for pairs: CKBUSDT, SPELLUSDT, GUNUSDT, NOTUSDT, BNBUSDT
2025-05-15 18:09:05,982 - INFO - Preloading data for pairs: OMUSDT, LAYERUSDT, PIXELUSDT, AMPUSDT, KMNOUSDT
2025-05-15 18:09:39,824 - INFO - Preloading data for pairs: SIGNUSDT, ONDOUSDT, JUPUSDT, ADAUSDT, RSRUSDT
2025-05-15 18:10:11,531 - INFO - Preloading data for pairs: COTIUSDT, BIGTIMEUSDT, BTCUSDT, ETHUSDT, SOLUSDT
2025-05-15 18:10:44,228 - INFO - Historical data preloading complete
2025-05-15 18:10:52,611 - INFO - Updating correlation matrix...
2025-05-15 18:10:52,612 - INFO - Current equity: $10000.00, Daily ROI: 0.00%, Drawdown: 0.00%, Risk level: normal
2025-05-15 18:10:52,613 - INFO - Current daily ROI: 0.00% (target: 0.5% - 2.0%)
2025-05-15 18:11:28,836 - INFO - Bot stopped by user
2025-05-15 18:11:28,865 - ERROR - Task exception was never retrieved
future: <Task finished name='Task-1' coro=<HybridTradingBot.run() done, defined at C:\Users\cuhey\OneDrive\Skrivebord\CUHOAI\GenesisAI\hybrid_bot.py:180> exception=KeyboardInterrupt()>
Traceback (most recent call last):
  File "C:\Users\cuhey\OneDrive\Skrivebord\CUHOAI\GenesisAI\main.py", line 30, in <module>
    asyncio.run(bot.run())
    ~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 193, in run
    with Runner(debug=debug, loop_factory=loop_factory) as runner:
         ~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 62, in __exit__
    self.close()
    ~~~~~~~~~~^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 70, in close
    _cancel_all_tasks(loop)
    ~~~~~~~~~~~~~~~~~^^^^^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 205, in _cancel_all_tasks
    loop.run_until_complete(tasks.gather(*to_cancel, return_exceptions=True))
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 708, in run_until_complete
    self.run_forever()
    ~~~~~~~~~~~~~~~~^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 679, in run_forever
    self._run_once()
    ~~~~~~~~~~~~~~^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 2027, in _run_once
    handle._run()
    ~~~~~~~~~~~^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\cuhey\OneDrive\Skrivebord\CUHOAI\GenesisAI\hybrid_bot.py", line 239, in run
    await asyncio.gather(*tasks)
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 194, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 708, in run_until_complete
    self.run_forever()
    ~~~~~~~~~~~~~~~~^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 679, in run_forever
    self._run_once()
    ~~~~~~~~~~~~~~^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 2027, in _run_once
    handle._run()
    ~~~~~~~~~~~^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\cuhey\OneDrive\Skrivebord\CUHOAI\GenesisAI\hybrid_bot.py", line 419, in trading_task
    pairs_to_analyze = await self.asset_selection.select_optimal_assets(limit=15)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\cuhey\OneDrive\Skrivebord\CUHOAI\GenesisAI\asset_selection.py", line 43, in select_optimal_assets
    klines = await self.market_analysis.get_klines(pair, start_time, '4h')
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\cuhey\OneDrive\Skrivebord\CUHOAI\GenesisAI\market_analysis.py", line 214, in get_klines
    klines = self.binance_client.get_historical_klines(
        pair, interval, start_time, limit=1000
    )
  File "C:\Users\cuhey\OneDrive\Skrivebord\CUHOAI\GenesisAI\venv\Lib\site-packages\binance\client.py", line 830, in get_historical_klines
    return self._historical_klines(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        symbol,
        ^^^^^^^
    ...<4 lines>...
        klines_type=klines_type,
        ^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\cuhey\OneDrive\Skrivebord\CUHOAI\GenesisAI\venv\Lib\site-packages\binance\client.py", line 900, in _historical_klines
    temp_data = self._klines(
        klines_type=klines_type,
    ...<4 lines>...
        endTime=end_ts,
    )
  File "C:\Users\cuhey\OneDrive\Skrivebord\CUHOAI\GenesisAI\venv\Lib\site-packages\binance\client.py", line 759, in _klines
    return self.get_klines(**params)
           ~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\cuhey\OneDrive\Skrivebord\CUHOAI\GenesisAI\venv\Lib\site-packages\binance\client.py", line 742, in get_klines
    return self._get("klines", data=params, version=self.PRIVATE_API_VERSION)
           ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\cuhey\OneDrive\Skrivebord\CUHOAI\GenesisAI\venv\Lib\site-packages\binance\client.py", line 180, in _get
    return self._request_api("get", path, signed, version, **kwargs)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\cuhey\OneDrive\Skrivebord\CUHOAI\GenesisAI\venv\Lib\site-packages\binance\client.py", line 117, in _request_api
    return self._request(method, uri, signed, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\cuhey\OneDrive\Skrivebord\CUHOAI\GenesisAI\venv\Lib\site-packages\binance\client.py", line 88, in _request
    self.response = getattr(self.session, method)(uri, headers=headers, data=data, **kwargs)
                    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\cuhey\OneDrive\Skrivebord\CUHOAI\GenesisAI\venv\Lib\site-packages\requests\sessions.py", line 602, in get
    return self.request("GET", url, **kwargs)
           ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\cuhey\OneDrive\Skrivebord\CUHOAI\GenesisAI\venv\Lib\site-packages\requests\sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "C:\Users\cuhey\OneDrive\Skrivebord\CUHOAI\GenesisAI\venv\Lib\site-packages\requests\sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "C:\Users\cuhey\OneDrive\Skrivebord\CUHOAI\GenesisAI\venv\Lib\site-packages\requests\adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "C:\Users\cuhey\OneDrive\Skrivebord\CUHOAI\GenesisAI\venv\Lib\site-packages\urllib3\connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "C:\Users\cuhey\OneDrive\Skrivebord\CUHOAI\GenesisAI\venv\Lib\site-packages\urllib3\connectionpool.py", line 534, in _make_request
    response = conn.getresponse()
  File "C:\Users\cuhey\OneDrive\Skrivebord\CUHOAI\GenesisAI\venv\Lib\site-packages\urllib3\connection.py", line 516, in getresponse
    httplib_response = super().getresponse()
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\http\client.py", line 1428, in getresponse
    response.begin()
    ~~~~~~~~~~~~~~^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\http\client.py", line 331, in begin
    version, status, reason = self._read_status()
                              ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\http\client.py", line 292, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
               ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\socket.py", line 719, in readinto
    return self._sock.recv_into(b)
           ~~~~~~~~~~~~~~~~~~~~^^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\ssl.py", line 1304, in recv_into
    return self.read(nbytes, buffer)
           ~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\ssl.py", line 1138, in read
    return self._sslobj.read(len, buffer)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 157, in _on_sigint
    raise KeyboardInterrupt()
KeyboardInterrupt
2025-05-15 18:11:28,933 - ERROR - _GatheringFuture exception was never retrieved
future: <_GatheringFuture finished exception=CancelledError()>
Traceback (most recent call last):
  File "C:\Users\cuhey\OneDrive\Skrivebord\CUHOAI\GenesisAI\correlation_analysis.py", line 34, in get_pair_prices
    async def get_pair_prices(pair):
asyncio.exceptions.CancelledError
