2025-06-21 20:43:26,326 - INFO - CoinGecko API connected: (V3) To the Moon!
2025-06-21 20:43:26,327 - INFO - CoinGecko AI client initialized with demo API key
2025-06-21 20:43:26,328 - INFO - CoinGecko AI client initialized
2025-06-21 20:43:26,394 - INFO - Database initialization complete
2025-06-21 20:43:26,405 - INFO - Schema update applied: ALTER TABLE positions ADD COLUMN take_profit_pct REAL
2025-06-21 20:43:26,415 - INFO - Schema update applied: ALTER TABLE positions ADD COLUMN stop_loss_pct REAL
2025-06-21 20:43:26,424 - INFO - Schema update applied: ALTER TABLE positions ADD COLUMN is_new_asset INTEGER DEFAULT 0
2025-06-21 20:43:26,433 - INFO - Schema update applied: ALTER TABLE positions ADD COLUMN exit_price REAL
2025-06-21 20:43:26,442 - INFO - Schema update applied: ALTER TABLE positions ADD COLUMN exit_time TEXT
2025-06-21 20:43:26,451 - INFO - Schema update applied: ALTER TABLE positions ADD COLUMN profit_loss REAL
2025-06-21 20:43:26,460 - INFO - Schema update applied: ALTER TABLE positions ADD COLUMN signal_source TEXT
2025-06-21 20:43:26,469 - INFO - Schema update applied: ALTER TABLE positions ADD COLUMN signal_strength REAL
2025-06-21 20:43:26,478 - INFO - Schema update applied: ALTER TABLE trades ADD COLUMN signal_source TEXT
2025-06-21 20:43:26,487 - INFO - Schema update applied: ALTER TABLE trades ADD COLUMN signal_strength REAL
2025-06-21 20:43:26,487 - INFO - Database schema updated successfully with 10 changes
2025-06-21 20:43:26,498 - INFO - Taapi.io client initialized (Free tier: 1 request/15s)
2025-06-21 20:43:26,498 - INFO - Advanced indicators initialized with Taapi.io
2025-06-21 20:43:26,505 - INFO - Taapi.io client initialized (Free tier: 1 request/15s)
2025-06-21 20:43:26,506 - INFO - Advanced indicators initialized with Taapi.io
2025-06-21 20:43:26,506 - INFO - Advanced indicators initialized successfully
2025-06-21 20:43:26,506 - INFO - Risk Manager initialized with equity protection: Warning at 3.0%, Risk Reduction at 5.0%, High Alert at 8.0%, Emergency at 12.0%
2025-06-21 20:43:26,506 - INFO - Hybrid Trading Bot initialized with 1000.00 equity
2025-06-21 20:43:26,506 - INFO - Mode: TEST trading
2025-06-21 20:43:26,507 - INFO - AI Provider: CoinGecko
2025-06-21 20:43:26,507 - INFO - Advanced Indicators: Taapi.io
2025-06-21 20:43:26,507 - INFO - Testing API connections...
2025-06-21 20:43:26,745 - INFO - Binance server time: 2025-06-21 20:43:26.648000
2025-06-21 20:43:27,215 - INFO - CoinGecko AI connection successful: 0.009806852569424429
2025-06-21 20:43:27,215 - INFO - Preloading historical data for analysis...
2025-06-21 20:43:27,215 - INFO - Preloading historical data for analysis...
2025-06-21 20:43:27,215 - INFO - Fetching top 20 trending cryptocurrency pairs
2025-06-21 20:43:28,164 - INFO - Found trending pairs: FUNUSDT, SEIUSDT, LAYERUSDT, NEIROUSDT, VIRTUALUSDT...
2025-06-21 20:43:28,165 - INFO - Preloading data for pairs: ORDIUSDT, KMNOUSDT, FUNUSDT, ENAUSDT, SEIUSDT
2025-06-21 20:43:57,334 - INFO - Preloading data for pairs: NEIROUSDT, ETHUSDT, WCTUSDT, SUSDT, ALTUSDT
2025-06-21 20:44:31,657 - INFO - Preloading data for pairs: VIRTUALUSDT, LAYERUSDT, TUSDT, ADAUSDT, SYRUPUSDT
2025-06-21 20:45:05,225 - INFO - Preloading data for pairs: SOLUSDT, BNBUSDT, NXPCUSDT, HUMAUSDT, INITUSDT
2025-06-21 20:45:38,464 - INFO - Preloading data for pairs: BTCUSDT, RSRUSDT, KAITOUSDT, BABYUSDT, SOPHUSDT
2025-06-21 20:46:12,461 - INFO - Historical data preloading complete
2025-06-21 20:46:21,371 - INFO - Updating correlation matrix...
2025-06-21 20:46:21,373 - INFO - Current equity: $1000.00, Daily ROI: 0.00%, Drawdown: 0.00%, Risk level: normal, Positions: 0/2 ($0.00, 0.0% of equity)
2025-06-21 20:46:21,416 - INFO - Current daily ROI: 0.00% (target: 0.5% - 2.5%)
2025-06-21 20:46:21,416 - INFO - Fetching top 30 trending cryptocurrency pairs
2025-06-21 20:46:22,361 - INFO - Found trending pairs: FUNUSDT, LAYERUSDT, SEIUSDT, VIRTUALUSDT, NEIROUSDT...
2025-06-21 20:46:23,749 - INFO - Selected optimal assets: APTUSDT, WCTUSDT, ORDIUSDT, FUNUSDT, HBARUSDT... (25 total)
2025-06-21 20:46:24,705 - INFO - Added APTUSDT to trading list (Volume: $47.5M, Change: +0.5%)
2025-06-21 20:46:24,706 - INFO - Added WCTUSDT to trading list (Volume: $32.8M, Change: +3.8%)
2025-06-21 20:46:24,706 - INFO - Added ORDIUSDT to trading list (Volume: $49.3M, Change: -7.3%)
2025-06-21 20:46:24,706 - INFO - Filtered out FUNUSDT - too volatile: +51.4%
2025-06-21 20:46:24,706 - INFO - Added HBARUSDT to trading list (Volume: $61.4M, Change: -2.5%)
2025-06-21 20:46:24,707 - INFO - Added CRVUSDT to trading list (Volume: $42.2M, Change: -2.3%)
2025-06-21 20:46:24,707 - INFO - Added SEIUSDT to trading list (Volume: $48.6M, Change: +10.7%)
2025-06-21 20:46:24,707 - INFO - Added NEIROUSDT to trading list (Volume: $37.6M, Change: -9.9%)
2025-06-21 20:46:24,707 - INFO - Added ETHUSDT to trading list (PREFERRED)
2025-06-21 20:46:24,708 - INFO - Added WBTCUSDT to trading list (Volume: $32.2M, Change: -0.2%)
2025-06-21 20:46:24,708 - INFO - Added TRBUSDT to trading list (Volume: $31.6M, Change: -3.1%)
2025-06-21 20:46:24,708 - INFO - Added ALTUSDT to trading list (Volume: $26.8M, Change: -7.8%)
2025-06-21 20:46:24,708 - INFO - Added VIRTUALUSDT to trading list (Volume: $101.6M, Change: -10.3%)
2025-06-21 20:46:24,708 - INFO - Added AAVEUSDT to trading list (Volume: $152.0M, Change: -0.7%)
2025-06-21 20:46:24,708 - INFO - Added LAYERUSDT to trading list (Volume: $75.9M, Change: +10.7%)
2025-06-21 20:46:24,709 - INFO - Added ADAUSDT to trading list (PREFERRED)
2025-06-21 20:46:24,709 - INFO - Added LPTUSDT to trading list (Volume: $33.6M, Change: -2.1%)
2025-06-21 20:46:24,709 - INFO - Added XRPUSDT to trading list (PREFERRED)
2025-06-21 20:46:24,709 - INFO - Added SOLUSDT to trading list (PREFERRED)
2025-06-21 20:46:24,709 - INFO - Added LTCUSDT to trading list (PREFERRED)
2025-06-21 20:46:24,710 - INFO - Added BNBUSDT to trading list (PREFERRED)
2025-06-21 20:46:24,710 - INFO - Added INITUSDT to trading list (Volume: $39.6M, Change: -8.5%)
2025-06-21 20:46:24,710 - INFO - Added BTCUSDT to trading list (PREFERRED)
2025-06-21 20:46:24,710 - INFO - Added KAITOUSDT to trading list (Volume: $85.2M, Change: -7.0%)
2025-06-21 20:46:24,710 - INFO - Added BABYUSDT to trading list (Volume: $25.5M, Change: -6.7%)
2025-06-21 20:46:24,710 - INFO - Volume filter result: 24 quality pairs from 25 candidates
2025-06-21 20:46:24,711 - INFO - Filtered from 25 to 15 high-quality pairs
2025-06-21 20:46:24,769 - INFO - Hourly performance report: {
  "equity": {
    "current": 1000.0,
    "start": 1000.0,
    "total_return_pct": 0.0,
    "max_drawdown_pct": 0,
    "avg_daily_return_pct": 0,
    "avg_weekly_return_pct": 0
  },
  "trades": {
    "total": 0,
    "win_count": 0,
    "loss_count": 0,
    "win_rate_pct": 0,
    "profit_factor": 0,
    "avg_profit": 0,
    "avg_loss": 0,
    "expected_value": 0,
    "recent_win_rate_pct": 0
  },
  "pairs": {
    "best_pair": "None",
    "best_pair_profit": 0,
    "worst_pair": "None",
    "worst_pair_profit": 0
  },
  "timestamp": "2025-06-21 20:46:24"
}
2025-06-21 20:47:00,783 - INFO - Correlation matrix updated for 41 pairs
2025-06-21 20:47:08,372 - INFO - Market regime changed: NEUTRAL -> BEAR_TRENDING
2025-06-21 20:47:08,373 - INFO - Market state: Regime=BEAR_TRENDING, Trend=bearish, Volatility=low, Breadth=0.00
2025-06-21 20:47:08,373 - INFO - CoinGecko insights for APT: neutral (0.50 confidence), sentiment: 0.14, whale: 0.10, smart money: neutral
2025-06-21 20:47:12,374 - INFO - CoinGecko insights for ETH: neutral (0.50 confidence), sentiment: 0.01, whale: 0.10, smart money: bullish
2025-06-21 20:47:28,322 - INFO - CoinGecko insights for WCT: neutral (0.50 confidence), sentiment: 0.00, whale: 0.00, smart money: neutral
2025-06-21 20:47:31,892 - INFO - CoinGecko insights for ORDI: neutral (0.50 confidence), sentiment: 0.00, whale: 0.00, smart money: neutral
2025-06-21 20:47:36,349 - INFO - CoinGecko insights for HBAR: neutral (0.50 confidence), sentiment: -0.10, whale: 0.10, smart money: neutral
2025-06-21 20:47:41,266 - INFO - CoinGecko insights for CRV: neutral (0.50 confidence), sentiment: 0.00, whale: 0.00, smart money: neutral
2025-06-21 20:47:44,827 - INFO - CoinGecko insights for SEI: neutral (0.50 confidence), sentiment: 0.00, whale: 0.00, smart money: neutral
2025-06-21 20:47:49,728 - INFO - CoinGecko insights for NEIRO: neutral (0.50 confidence), sentiment: 0.00, whale: 0.00, smart money: neutral
2025-06-21 20:47:53,299 - INFO - CoinGecko insights for WBTC: neutral (0.50 confidence), sentiment: 0.00, whale: 0.00, smart money: neutral
2025-06-21 20:47:58,213 - INFO - CoinGecko insights for TRB: neutral (0.50 confidence), sentiment: 0.00, whale: 0.00, smart money: neutral
2025-06-21 20:48:02,658 - INFO - CoinGecko insights for ALT: neutral (0.50 confidence), sentiment: 0.00, whale: 0.00, smart money: neutral
2025-06-21 20:48:06,674 - INFO - CoinGecko insights for VIRTUAL: neutral (0.50 confidence), sentiment: 0.00, whale: 0.00, smart money: neutral
2025-06-21 20:48:11,417 - ERROR - Taapi.io API error 404: {"errors":["The endpoint (or indicator) you are calling does not exist!"]}
2025-06-21 20:48:11,417 - WARNING - Taapi.io API error, backing off for 300s: HTTP 404
2025-06-21 20:48:23,357 - INFO - APTUSDT analysis: SELL signal with 0.38 strength
2025-06-21 20:48:23,360 - INFO - TRBUSDT analysis: NEUTRAL signal with 0.00 strength
2025-06-21 20:48:23,364 - INFO - VIRTUALUSDT analysis: SELL signal with 0.40 strength
2025-06-21 20:48:23,366 - INFO - ALTUSDT analysis: SELL signal with 0.35 strength
2025-06-21 20:48:26,256 - ERROR - Taapi.io API error 404: {"errors":["The endpoint (or indicator) you are calling does not exist!"]}
2025-06-21 20:48:26,257 - WARNING - Taapi.io API error, backing off for 300s: HTTP 404
2025-06-21 20:48:27,802 - INFO - ETHUSDT analysis: SELL signal with 0.38 strength
2025-06-21 20:48:31,110 - INFO - WCTUSDT analysis: SELL signal with 0.30 strength
2025-06-21 20:48:31,166 - INFO - ORDIUSDT analysis: SELL signal with 0.40 strength
2025-06-21 20:48:31,169 - INFO - HBARUSDT analysis: SELL signal with 0.43 strength
2025-06-21 20:48:31,171 - INFO - CRVUSDT analysis: NEUTRAL signal with 0.00 strength
2025-06-21 20:48:31,174 - INFO - SEIUSDT analysis: BUY signal with 0.38 strength
2025-06-21 20:48:31,175 - INFO - Signal too weak for SEIUSDT: 0.38
2025-06-21 20:48:31,177 - INFO - NEIROUSDT analysis: SELL signal with 0.40 strength
2025-06-21 20:48:31,180 - INFO - WBTCUSDT analysis: SELL signal with 0.32 strength
2025-06-21 20:48:31,180 - INFO - Trading cycle completed in 129.81 seconds
2025-06-21 20:48:41,388 - ERROR - Taapi.io API error 404: {"errors":["The endpoint (or indicator) you are calling does not exist!"]}
2025-06-21 20:48:41,388 - WARNING - Taapi.io API error, backing off for 300s: HTTP 404
2025-06-21 20:48:56,492 - ERROR - Taapi.io API error 404: {"errors":["The endpoint (or indicator) you are calling does not exist!"]}
2025-06-21 20:48:56,492 - WARNING - Taapi.io API error, backing off for 300s: HTTP 404
2025-06-21 20:49:11,582 - ERROR - Taapi.io API error 404: {"errors":["The endpoint (or indicator) you are calling does not exist!"]}
2025-06-21 20:49:11,582 - WARNING - Taapi.io API error, backing off for 300s: HTTP 404
2025-06-21 20:49:26,677 - ERROR - Taapi.io API error 404: {"errors":["The endpoint (or indicator) you are calling does not exist!"]}
2025-06-21 20:49:26,677 - WARNING - Taapi.io API error, backing off for 300s: HTTP 404
2025-06-21 20:49:41,782 - ERROR - Taapi.io API error 404: {"errors":["The endpoint (or indicator) you are calling does not exist!"]}
2025-06-21 20:49:41,783 - WARNING - Taapi.io API error, backing off for 300s: HTTP 404
2025-06-21 20:49:56,857 - ERROR - Taapi.io API error 404: {"errors":["The endpoint (or indicator) you are calling does not exist!"]}
2025-06-21 20:49:56,858 - WARNING - Taapi.io API error, backing off for 300s: HTTP 404
2025-06-21 20:50:11,976 - ERROR - Taapi.io API error 404: {"errors":["The endpoint (or indicator) you are calling does not exist!"]}
2025-06-21 20:50:11,977 - WARNING - Taapi.io API error, backing off for 300s: HTTP 404
2025-06-21 20:51:54,438 - INFO - Top opportunities found: ['FDUSDUSDT', 'TONUSDT', 'GNSUSDT', 'BANANAS31USDT', 'XRPUSDT']
2025-06-21 20:51:55,406 - INFO - Selected optimal assets: APTUSDT, WCTUSDT, ORDIUSDT, FUNUSDT, HBARUSDT... (20 total)
2025-06-21 20:51:56,800 - INFO - Added APTUSDT to trading list (Volume: $47.5M, Change: +0.3%)
2025-06-21 20:51:56,800 - INFO - Added WCTUSDT to trading list (Volume: $33.0M, Change: +3.8%)
2025-06-21 20:51:56,800 - INFO - Added ORDIUSDT to trading list (Volume: $49.5M, Change: -7.1%)
2025-06-21 20:51:56,801 - INFO - Filtered out FUNUSDT - too volatile: +50.5%
2025-06-21 20:51:56,801 - INFO - Added HBARUSDT to trading list (Volume: $61.7M, Change: -2.6%)
2025-06-21 20:51:56,801 - INFO - Added CRVUSDT to trading list (Volume: $42.0M, Change: -2.5%)
2025-06-21 20:51:56,801 - INFO - Added SEIUSDT to trading list (Volume: $48.6M, Change: +11.0%)
2025-06-21 20:51:56,801 - INFO - Added NEIROUSDT to trading list (Volume: $37.6M, Change: -9.9%)
2025-06-21 20:51:56,802 - INFO - Added ETHUSDT to trading list (PREFERRED)
2025-06-21 20:51:56,802 - INFO - Added WBTCUSDT to trading list (Volume: $32.1M, Change: -0.2%)
2025-06-21 20:51:56,802 - INFO - Added ALTUSDT to trading list (Volume: $26.8M, Change: -7.7%)
2025-06-21 20:51:56,802 - INFO - Added VIRTUALUSDT to trading list (Volume: $101.6M, Change: -10.4%)
2025-06-21 20:51:56,802 - INFO - Added AAVEUSDT to trading list (Volume: $151.8M, Change: -1.1%)
2025-06-21 20:51:56,803 - INFO - Added LAYERUSDT to trading list (Volume: $76.4M, Change: +12.0%)
2025-06-21 20:51:56,803 - INFO - Added ADAUSDT to trading list (PREFERRED)
2025-06-21 20:51:56,803 - INFO - Added LPTUSDT to trading list (Volume: $33.6M, Change: -1.9%)
2025-06-21 20:51:56,803 - INFO - Added XRPUSDT to trading list (PREFERRED)
2025-06-21 20:51:56,803 - INFO - Added SOLUSDT to trading list (PREFERRED)
2025-06-21 20:51:56,803 - INFO - Added LTCUSDT to trading list (PREFERRED)
2025-06-21 20:51:56,804 - INFO - Added BNBUSDT to trading list (PREFERRED)
2025-06-21 20:51:56,804 - INFO - Volume filter result: 19 quality pairs from 20 candidates
2025-06-21 20:51:56,814 - INFO - CoinGecko insights for APT: neutral (0.50 confidence), sentiment: 0.14, whale: 0.10, smart money: neutral
2025-06-21 20:52:01,302 - INFO - CoinGecko insights for WCT: neutral (0.50 confidence), sentiment: 0.21, whale: 0.50, smart money: bearish
2025-06-21 20:52:05,271 - INFO - CoinGecko insights for ORDI: bearish (0.65 confidence), sentiment: -0.33, whale: -0.10, smart money: bearish
2025-06-21 20:52:08,070 - INFO - Bot stopped by user
2025-06-21 20:52:08,118 - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-1' coro=<HybridTradingBot.run() done, defined at C:\Users\cuhey\Desktop\AI-V2\GenesisAI\src\hybrid_bot.py:205> wait_for=<_GatheringFuture finished exception=CancelledError()> cb=[gather.<locals>._done_callback() at C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\tasks.py:820]>
2025-06-21 20:52:08,119 - ERROR - _GatheringFuture exception was never retrieved
future: <_GatheringFuture finished exception=CancelledError()>
Traceback (most recent call last):
  File "C:\Users\cuhey\Desktop\AI-V2\GenesisAI\src\main.py", line 31, in <module>
    asyncio.run(bot.run())
    ~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 194, in run
    with Runner(debug=debug, loop_factory=loop_factory) as runner:
         ~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 62, in __exit__
    self.close()
    ~~~~~~~~~~^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 70, in close
    _cancel_all_tasks(loop)
    ~~~~~~~~~~~~~~~~~^^^^^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 206, in _cancel_all_tasks
    loop.run_until_complete(tasks.gather(*to_cancel, return_exceptions=True))
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 712, in run_until_complete
    self.run_forever()
    ~~~~~~~~~~~~~~~~^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 683, in run_forever
    self._run_once()
    ~~~~~~~~~~~~~~^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 2040, in _run_once
    handle._run()
    ~~~~~~~~~~~^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\cuhey\Desktop\AI-V2\GenesisAI\src\hybrid_bot.py", line 535, in trading_task
    await asyncio.gather(*analysis_tasks)
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 195, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 712, in run_until_complete
    self.run_forever()
    ~~~~~~~~~~~~~~~~^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 683, in run_forever
    self._run_once()
    ~~~~~~~~~~~~~~^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 2040, in _run_once
    handle._run()
    ~~~~~~~~~~~^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\cuhey\Desktop\AI-V2\GenesisAI\src\hybrid_bot.py", line 734, in analyze_and_trade
    mtf_analysis = await self.market_analysis.get_multi_timeframe_analysis(pair)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\cuhey\Desktop\AI-V2\GenesisAI\src\market_analysis.py", line 53, in get_multi_timeframe_analysis
    klines = await self.get_klines(pair, now - lookback_ms, interval)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\cuhey\Desktop\AI-V2\GenesisAI\src\market_analysis.py", line 261, in get_klines
    klines = self.binance_client.get_historical_klines(
        pair, interval, start_time, limit=1000
    )
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\site-packages\binance\client.py", line 781, in get_historical_klines
    return self._historical_klines(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        symbol,
        ^^^^^^^
    ...<4 lines>...
        klines_type=klines_type,
        ^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\site-packages\binance\client.py", line 851, in _historical_klines
    temp_data = self._klines(
        klines_type=klines_type,
    ...<4 lines>...
        endTime=end_ts,
    )
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\site-packages\binance\client.py", line 710, in _klines
    return self.get_klines(**params)
           ~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\site-packages\binance\client.py", line 693, in get_klines
    return self._get("klines", data=params, version=self.PRIVATE_API_VERSION)
           ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\site-packages\binance\client.py", line 176, in _get
    return self._request_api("get", path, signed, version, **kwargs)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\site-packages\binance\client.py", line 113, in _request_api
    return self._request(method, uri, signed, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\site-packages\binance\client.py", line 88, in _request
    self.response = getattr(self.session, method)(uri, headers=headers, data=data, **kwargs)
                    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\site-packages\requests\sessions.py", line 602, in get
    return self.request("GET", url, **kwargs)
           ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\site-packages\requests\sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\site-packages\requests\sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\site-packages\requests\adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\site-packages\urllib3\connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\site-packages\urllib3\connectionpool.py", line 534, in _make_request
    response = conn.getresponse()
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\site-packages\urllib3\connection.py", line 516, in getresponse
    httplib_response = super().getresponse()
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\http\client.py", line 1430, in getresponse
    response.begin()
    ~~~~~~~~~~~~~~^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\http\client.py", line 331, in begin
    version, status, reason = self._read_status()
                              ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\http\client.py", line 292, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
               ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\socket.py", line 719, in readinto
    return self._sock.recv_into(b)
           ~~~~~~~~~~~~~~~~~~~~^^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\ssl.py", line 1304, in recv_into
    return self.read(nbytes, buffer)
           ~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\ssl.py", line 1138, in read
    return self._sslobj.read(len, buffer)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 157, in _on_sigint
    raise KeyboardInterrupt()
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\cuhey\Desktop\AI-V2\GenesisAI\src\hybrid_bot.py", line 373, in market_monitor_task
    await asyncio.sleep(1800)
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\tasks.py", line 718, in sleep
    return await future
           ^^^^^^^^^^^^
asyncio.exceptions.CancelledError
2025-06-21 20:52:08,301 - ERROR - Task exception was never retrieved
future: <Task finished name='Task-3' coro=<HybridTradingBot.trading_task() done, defined at C:\Users\cuhey\Desktop\AI-V2\GenesisAI\src\hybrid_bot.py:381> exception=KeyboardInterrupt()>
Traceback (most recent call last):
  File "C:\Users\cuhey\Desktop\AI-V2\GenesisAI\src\main.py", line 31, in <module>
    asyncio.run(bot.run())
    ~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 194, in run
    with Runner(debug=debug, loop_factory=loop_factory) as runner:
         ~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 62, in __exit__
    self.close()
    ~~~~~~~~~~^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 70, in close
    _cancel_all_tasks(loop)
    ~~~~~~~~~~~~~~~~~^^^^^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 206, in _cancel_all_tasks
    loop.run_until_complete(tasks.gather(*to_cancel, return_exceptions=True))
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 712, in run_until_complete
    self.run_forever()
    ~~~~~~~~~~~~~~~~^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 683, in run_forever
    self._run_once()
    ~~~~~~~~~~~~~~^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 2040, in _run_once
    handle._run()
    ~~~~~~~~~~~^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\cuhey\Desktop\AI-V2\GenesisAI\src\hybrid_bot.py", line 535, in trading_task
    await asyncio.gather(*analysis_tasks)
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 195, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 712, in run_until_complete
    self.run_forever()
    ~~~~~~~~~~~~~~~~^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 683, in run_forever
    self._run_once()
    ~~~~~~~~~~~~~~^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\base_events.py", line 2040, in _run_once
    handle._run()
    ~~~~~~~~~~~^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\cuhey\Desktop\AI-V2\GenesisAI\src\hybrid_bot.py", line 734, in analyze_and_trade
    mtf_analysis = await self.market_analysis.get_multi_timeframe_analysis(pair)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\cuhey\Desktop\AI-V2\GenesisAI\src\market_analysis.py", line 53, in get_multi_timeframe_analysis
    klines = await self.get_klines(pair, now - lookback_ms, interval)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\cuhey\Desktop\AI-V2\GenesisAI\src\market_analysis.py", line 261, in get_klines
    klines = self.binance_client.get_historical_klines(
        pair, interval, start_time, limit=1000
    )
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\site-packages\binance\client.py", line 781, in get_historical_klines
    return self._historical_klines(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        symbol,
        ^^^^^^^
    ...<4 lines>...
        klines_type=klines_type,
        ^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\site-packages\binance\client.py", line 851, in _historical_klines
    temp_data = self._klines(
        klines_type=klines_type,
    ...<4 lines>...
        endTime=end_ts,
    )
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\site-packages\binance\client.py", line 710, in _klines
    return self.get_klines(**params)
           ~~~~~~~~~~~~~~~^^^^^^^^^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\site-packages\binance\client.py", line 693, in get_klines
    return self._get("klines", data=params, version=self.PRIVATE_API_VERSION)
           ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\site-packages\binance\client.py", line 176, in _get
    return self._request_api("get", path, signed, version, **kwargs)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\site-packages\binance\client.py", line 113, in _request_api
    return self._request(method, uri, signed, **kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\site-packages\binance\client.py", line 88, in _request
    self.response = getattr(self.session, method)(uri, headers=headers, data=data, **kwargs)
                    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\site-packages\requests\sessions.py", line 602, in get
    return self.request("GET", url, **kwargs)
           ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\site-packages\requests\sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\site-packages\requests\sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\site-packages\requests\adapters.py", line 667, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\site-packages\urllib3\connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\site-packages\urllib3\connectionpool.py", line 534, in _make_request
    response = conn.getresponse()
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\site-packages\urllib3\connection.py", line 516, in getresponse
    httplib_response = super().getresponse()
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\http\client.py", line 1430, in getresponse
    response.begin()
    ~~~~~~~~~~~~~~^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\http\client.py", line 331, in begin
    version, status, reason = self._read_status()
                              ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\http\client.py", line 292, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
               ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\socket.py", line 719, in readinto
    return self._sock.recv_into(b)
           ~~~~~~~~~~~~~~~~~~~~^^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\ssl.py", line 1304, in recv_into
    return self.read(nbytes, buffer)
           ~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\ssl.py", line 1138, in read
    return self._sslobj.read(len, buffer)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\Users\cuhey\AppData\Local\Programs\Python\Python313\Lib\asyncio\runners.py", line 157, in _on_sigint
    raise KeyboardInterrupt()
KeyboardInterrupt
